const t=window.InputAddress.h;class e{constructor(){this.streetList=[]}async onStreetInput(t){if(t){const e=t.split(",");3==e.length?(this.street=e[0],this.postalTown=e[1].trim(),this.country=e[2].trim(),console.log(e)):this.street=t}else this.street=t;return this.streetList=this.street&&this.street.length>3?await async function(t,e,s){let o="https://address-autocomplete.azurewebsites.net/api/address/"+t;e&&s?o+=`?town=${e};country=${s}`:e?o+=`?town=${e}`:e&&(o+=`?country=${s}`);const r=await fetch(o);let n=[];return r.ok&&(n=await r.json()),n}(this.street||"",this.postalTown,this.country):[],console.log(this.streetList),this.street}getValue(t){return t.target?t.target.value:void 0}render(){const e=this.name?this.name+"_":"";return[t("label",{htmlFor:e+"street"},"Street Address"),t("input",{name:e+"street",value:this.street,placeholder:"Street 42",list:"street-list",onInput:async t=>this.onStreetInput(this.getValue(t)),type:"text"}),t("datalist",{id:"street-list"},this.streetList.map(e=>t("option",null,[e.street,e.town,e.country].filter(t=>null!=t).join(", ")))),t("label",{htmlFor:e+"postalCode"},"Postal code"),t("input",{name:e+"postalCode",value:this.postalCode,placeholder:"133 70",onInput:t=>this.postalCode=this.getValue(t),type:"text"}),t("label",{htmlFor:e+"postalTown"},"Postal Town"),t("input",{name:e+"postalTown",value:this.postalTown,placeholder:"Postal Town",onInput:t=>this.postalTown=this.getValue(t),type:"text"}),t("label",{htmlFor:e+"country"},"Country"),t("input",{name:e+"country",value:this.country,placeholder:"Country",onInput:t=>this.country=this.getValue(t),type:"text"})]}static get is(){return"input-address"}static get properties(){return{country:{type:String,attr:"country",mutable:!0},name:{type:String,attr:"name"},postalCode:{type:String,attr:"postal-code",mutable:!0},postalTown:{type:String,attr:"postal-town",mutable:!0},street:{type:String,attr:"street",mutable:!0},streetList:{state:!0}}}static get style(){return"datalist{display:block}"}}export{e as InputAddress};